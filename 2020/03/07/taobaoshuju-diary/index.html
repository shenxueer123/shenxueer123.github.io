<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="ie=edge">

    <meta name="author" content="shenwansan">





<title>taobaoshuju_diary | 沈万三</title>



    <link rel="icon" href="/favicon.ico">




    <!-- stylesheets list from _config.yml -->
    
    <link rel="stylesheet" href="/css/style.css">
    



    <!-- scripts list from _config.yml -->
    
    <script src="/js/script.js"></script>
    
    <script src="/js/tocbot.min.js"></script>
    



    
    
        
    


</head>
<body>
    <div class="wrapper">
        <header>
    <nav class="navbar">
        <div class="container">
            <div class="navbar-header header-logo"><a href="/">xueer&#39;s Blog</a></div>
            <div class="menu navbar-right">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
                <input id="switch_default" type="checkbox" class="switch_default">
                <label for="switch_default" class="toggleBtn"></label>
            </div>

        </div>
    </nav>

    
    <nav class="navbar-mobile" id="nav-mobile">
        <div class="container">
            <div class="navbar-header">
                <div>
                    <a href="/">xueer&#39;s Blog</a><a id="mobile-toggle-theme">·&nbsp;Light</a>
                </div>
                <div class="menu-toggle" onclick="mobileBtn()">&#9776; Menu</div>
            </div>
            <div class="menu" id="mobile-menu">
                
                    <a class="menu-item" href="/archives">Posts</a>
                
                    <a class="menu-item" href="/category">Categories</a>
                
                    <a class="menu-item" href="/tag">Tags</a>
                
                    <a class="menu-item" href="/about">About</a>
                
            </div>
        </div>
    </nav>

</header>
<script>
    var mobileBtn = function f() {
        var toggleMenu = document.getElementsByClassName("menu-toggle")[0];
        var mobileMenu = document.getElementById("mobile-menu");
        if(toggleMenu.classList.contains("active")){
           toggleMenu.classList.remove("active")
            mobileMenu.classList.remove("active")
        }else{
            toggleMenu.classList.add("active")
            mobileMenu.classList.add("active")
        }
    }
</script>
        <div class="main">
            <div class="container">
    
    

    
    <article class="post-wrap">
        <header class="post-header">
            <h1 class="post-title">taobaoshuju_diary</h1>
            
                <div class="post-meta">
                    
                        Author: <a itemprop="author" rel="author" href="/">shenwansan</a>
                    

                    
                        <span class="post-time">
                        Date: <a href="#">March 7, 2020&nbsp;&nbsp;6:35:49</a>
                        </span>
                    
                    
                        <span class="post-category">
                    Category:
                            
                                <a href="/categories/project/">project</a>
                            
                        </span>
                    
                </div>
            
        </header>

        <div class="post-content">
            <p>2.12<br>代码分成四个部分<br>第一部分：用selenium，自动化打开网站。<br>遇到问题：总是会让跳转登录，无法实现自动化。<br>解决办法：学习模拟登录，做一个cookies池，或者买一个。<br>第二部分：使用xpath解析网页，并爬取相关数据。试着爬取一个网页，解析数据出现问题，不过这个问题很好解决。<br>第三部分：数据入库<br>第四部分：组合代码，并完善代码，打包封装。</p>
<p>2.13目标<br>学习模拟登录，并完成第二三部分。</p>
<p>2.13完成情况<br>第一部分：用selenium，自动化打开网络，先不管啦</p>
<p>第二部分：用xpath解析网络，并爬取相关数据。<br>          完成了一个网页的解析。<br>          从点击其他的页面中获取名称，进行匹配。<br>          需要解决的问题:一张图片只需要5条准确的相关数据，需求里描述优先使用阿里巴巴测试网点，进行搜索。如果阿里巴巴找不出5条数据，再用淘宝搜索。满足的要求：匹配到三个汉字以上，视为成功。如何用python匹配汉字，是个问题。<br>          成功后，抓取当前页面上的单价。<br>          并跳转到下一个页面，获取图片，店铺名称，链接。</p>
<p>第三个部分：一条信息的数据入库完成</p>
<p>第四部分：组合代码，封装。</p>
<p>2.14目标：解决匹配文字的问题。</p>
<p>2.14完成情况<br>第一部分：用selenium，自动化打开网络，先停了一下。</p>
<p>第二部分：用xpath解析网络，并爬取相关数据。（因为一直用xpath解析，解析出来的数据也没有问题。如果改用Pyqyery解析的话，代码需要重新写。倘若公司有强制性要求，那就改。）<br>          完成一个网页的解析。<br>          解决了汉字匹配问题。<br>          成功后抓取当前页面上的单价。<br>          并跳转到下一个页面，获取图片，店铺名称，链接。</p>
<p>第三部分：一条数据入库完成。</p>
<p>第四部分：除了前面的自动化跳转，后面的爬取与存储的代码块已经完成，已经进行了部分组合。组合代码过程中，有遇到问题，但问题不大。</p>
<p>2.15<br>目标：学习自动化selenium的代码,继续组合已完成代码。<br>2.15停了一天，未完成目标。</p>
<p>2.16完成情况<br>项目步骤：<br>1用selenium实现打开阿里巴巴网页，点击叉号，随后点击图片查找的按钮。<br>已经实现</p>
<p>2用selenium找到指定的目录，图片，点击，实现上传图片。<br>遇到问题：如何用selenium上传图片？（2循环上传图片）</p>
<p>3上传图片后，跳转到的搜索出的商品页面，先获取5个商品的名字，如果这5条商品名字之间，至少有三个字重合，视为有效数据，存入数据库。<br>如果没有3个汉字重合，去掉数据，并向后再取一条数据。如果向后连续取出5条数据，都无法满足三个汉字重合，将不插入数据。<br>（3判断返回结果）已经实现</p>
<p>4获取有效数据商品名称后，在搜索出的商品页面上获取价格，存入数据库。<br>已经实现</p>
<p>5用selenium实现点击每个商品，进入单个的商品页面。（或者爬出链接，再跳转。）<br>已经实现</p>
<p>6进入单个商品页面后，爬取店铺名称，链接入库。图片保存到本地。<br>已经实现</p>
<p>2.17<br>目标：解决上传问题,创建数据库,争取在今天实现循环抓取<br>2.17完成情况：<br>1用selenium实现打开阿里巴巴网页，点击叉号，随后点击图片查找的按钮。<br>已经实现</p>
<p>2用selenium找到指定的目录，图片，点击，实现上传图片。<br>遇到问题：如何用selenium上传图片？（2循环上传图片）<br>问题解决了</p>
<p>3上传图片后，跳转到的搜索出的商品页面，先获取5个商品的名字，如果这5条商品名字之间，至少有三个字重合，视为有效数据，存入数据库。<br>如果没有3个汉字重合，去掉数据，并向后再取一条数据。如果向后连续取出5条数据，都无法满足三个汉字重合，将不插入数据。<br>（3判断返回结果）已经实现</p>
<p>4获取有效数据商品名称后，在搜索出的商品页面上获取价格，存入数据库。<br>已经实现</p>
<p>5用selenium实现点击每个商品，进入单个的商品页面。（或者爬出链接，再跳转。）<br>已经实现</p>
<p>6进入单个商品页面后，爬取店铺名称，链接入库。图片保存到本地。<br>已经实现</p>
<p>各个代码块，已经测试完成，就剩下循环了，与组合代码。</p>
<p>2.18目标:<br>组合代码，实现循环抓取。</p>
<p>2.18完成情况：<br>1循环上传图片：完成<br>2循环匹配数据，检查数据是否符合三个汉字相同，如果相同输出yes。<br>前半段的代码集合，已经完毕，就剩下后面抓取数据入库了。<br>遇到问题：连续着测试几次，代码还算稳定，就是时间有点长。（问题留着，待整个写完后，进行优化一下）</p>
<p>2.19目标：<br>循环爬取数据，并入库。（今天元宵节，大概率会被家长带出去。不过明天就去学校了，效率就高了）</p>
<p>2.19停一天</p>
<p>2.20完成情况:<br>实现循环爬取，并且入库。<br>遇到问题:<br>发现自己有的函数，超过20行</p>
<p>2.21目标:<br>改函数，使得每个不超过20行<br>如果顺利的话，明天就可以交代码</p>
<p>2.21遇到问题:<br>动了几个函数，出现一堆问题</p>
<p>2.22继续改函数，争取今天改完</p>
<p>2.22完成情况:<br>1遇到问题:<br>之前由于循环的图片比较少，所以没在意数据入库的时间。数据是分块一个一个采集的，每采集一个就要插入一个pysql，耗时很大。</p>
<p>解决办法:<br>先把数据采集到文本，再调用文本一次性写入数据库，这种方法能用不？</p>
<p>2main函数实在没法短了，如果包起来它里面任何一块代码，都会引起很大的麻烦。</p>
<p>3改程序进程:<br>已完成:打开网页，上传图片，保存链接，保存价格，图片序列号入库<br>未完成:第二个页面打开后，获取图片和店铺名称，剩下均未入库</p>
<p>心得:不试不知道，一试吓一跳啊。之前匹配函数，写的自己都看不过去，好在终于改短了。之前第二个页面解析不认真，不止一种标签包裹店铺名称。<br>还有费了老鼻子劲把数据一条条写到数据库，但当时已经觉得慢了，不知道怎么改。后来就想着先存到文本，一起写入，明显快多了。</p>
<p>您别担心，我会在月底完成任务的。先把阿里巴巴这个先搞定，淘宝就会快。<br>2.23完成情况<br>改程序进程:<br>已完成:打开网页，上传图片，保存链接，保存价格，图片序列号入库，第二个页面打开后，获取店铺名称，下载图片，图片序列号入库完成，按要求来建一个新文件夹，用来放下载的图片。</p>
<p>未完成:下载的图片未能正确地，进入文件夹(正在解决这个问题)，挂代理。</p>
<p>2.24目标<br>交代码</p>
<p>2.24完成情况:<br>已经发过去了</p>
<p>2.25目标:<br>分析淘宝页面，改代码<br>交入库代码<br>阿里巴巴的代理测试</p>
<p>完美结束！</p>

        </div>

        
            <section class="post-copyright">
                
                    <p class="copyright-item">
                        <span>Author:</span>
                        <span>shenwansan</span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>Permalink:</span>
                        <span><a href="https://shenxueer123.github.io/2020/03/07/taobaoshuju-diary/">https://shenxueer123.github.io/2020/03/07/taobaoshuju-diary/</a></span>
                    </p>
                
                
                    <p class="copyright-item">
                        <span>License:</span>
                        <span>Copyright (c) 2019 <a href="http://creativecommons.org/licenses/by-nc/4.0/" target="_blank" rel="noopener">CC-BY-NC-4.0</a> LICENSE</span>
                    </p>
                
                
                     <p class="copyright-item">
                         <span>Slogan:</span>
                         <span>Do you believe in <strong>DESTINY<strong>?</span>
                     </p>
                

            </section>
        
        <section class="post-tags">
            <div>
                <span>Tag(s):</span>
                <span class="tag">
                    
                </span>
            </div>
            <div>
                <a href="javascript:window.history.back();" target="_blank" rel="noopener">back</a>
                <span>· </span>
                <a href="/">home</a>
            </div>
        </section>
        <section class="post-nav">
            
            
            <a class="next" rel="next" href="/2020/03/07/stock-data/">stock_data</a>
            
        </section>


    </article>
</div>

        </div>
        <footer id="footer" class="footer">
    <div class="copyright">
        <span>© shenwansan | Powered by <a href="https://hexo.io" target="_blank">Hexo</a> & <a href="https://github.com/Siricee/hexo-theme-Chic" target="_blank">Chic</a></span>
    </div>
</footer>

    </div>
</body>
</html>
